```C
// parametros:
// i: el primer proceso a ejecutar
// N: la cantidad de procesos
id_proc_a_ejecutar = i; // variable compartida
int semaforos[N];

for(int j=0; j<N; j++){
  if(i!=j) semaforos[j] = sem(0);
  else semaforos[j] = sem(1);
}

ejecutarP(){
  int mi_id = id_p();   // id_p() da el id entre 0,...,N-1 del proceso actual dentro de P0,...,PN-1

  // quedarse esperando su signal
  semaforos[mi_id].wait();

  // ejecutar su codigo ...

  next_id = (mi_id + 1) % N; // i++ mod N
  semaforos[next_id].signal();

  exit(0);
}
```